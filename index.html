<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å±¬æ–¼å¦³çš„å°ˆå±¬é©šå–œ</title>
<style>
    html, body {
        margin: 0; padding: 0; height: 100%;
        overflow-x: hidden;
        background: #a13f66;
        position: relative;
        font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
        color: #fff;
        user-select: none;
        text-align: center;
        padding: 60px 20px;
    }
    #snow-canvas {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
        z-index: 0;
        background: transparent;
        display: block;
    }
    #passwordPage, #surprisePage {
        position: relative;
        z-index: 2;
    }
    h1 {
        font-size: 38px;
        margin-bottom: 20px;
    }
    p {
        font-size: 28px;
        margin-bottom: 30px;
        line-height: 1.5em;
    }
    input {
        padding: 12px 15px;
        font-size: 20px;
        border-radius: 8px;
        border: 2px solid #ffd1e3;
        width: 240px;
        text-align: center;
        outline: none;
        background: #fff0f5;
        color: #a13f66;
    }
    button {
        padding: 12px 30px;
        font-size: 22px;
        border-radius: 10px;
        background-color: #e91e63;
        color: white;
        border: none;
        cursor: pointer;
        margin-top: 15px;
        transition: background-color 0.3s ease;
    }
    button:hover {
        background-color: #ad1457;
    }
    #errorMsg {
        color: #ffaaaa;
        margin-top: 12px;
        height: 24px;
        font-weight: 600;
    }
    .heart {
        font-size: 70px;
        color: #ff80ab;
        animation: heartbeat 1.3s infinite;
        margin: 25px 0;
        user-select: none;
    }
    @keyframes heartbeat {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.3); }
    }
    .video-wrapper {
        position: relative;
        width: 100%;
        max-width: 426px;
        margin: 0 auto 40px auto;
        padding-top: 56.25%;
        overflow: hidden;
        z-index: 2;
    }
    .video-wrapper iframe {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        border: 0;
    }

    /* è–èª•è€äººé›ªæ©‡å’Œéº‹é¹¿å‹•ç•« */
    #sleigh {
      position: fixed;
      top: 50px;
      left: -300px;
      width: 280px;
      animation: flySleigh 20s linear infinite;
      pointer-events: none;
      z-index: 3;
      user-select: none;
      filter: drop-shadow(0 0 4px rgba(255,255,255,0.6));
    }
    @keyframes flySleigh {
      0% { left: -300px; }
      100% { left: 110vw; }
    }
</style>
</head>
<body>

<canvas id="snow-canvas"></canvas>

<!-- è–èª•è€äººé›ªæ©‡å’Œéº‹é¹¿åœ–ç‰‡ -->
<img id="sleigh" src="https://i.imgur.com/WrvifTJ.png" alt="è–èª•è€äººé›ªæ©‡å’Œéº‹é¹¿" />

<div id="passwordPage">
    <h1>ğŸ æœ‰ä»½å±¬æ–¼å¦³çš„å°é©šå–œ</h1>
    <p>è¼¸å…¥å¦³å°ˆå±¬çš„ 8 ä½æ•¸å¯†ç¢¼<br>(å°æç¤ºï¼šé‚£æ˜¯å¦³æœ€é‡è¦çš„æ—¥å­)</p>
    <input type="password" id="passwordInput" placeholder="ä¾‹å¦‚ 19981101" autocomplete="off" />
    <br />
    <button onclick="checkPassword()">è§£é–</button>
    <p id="errorMsg"></p>
</div>

<div id="surprisePage" style="display:none;">
    <h1>çµ¦ä»Šå¤©è¾›è‹¦ä¸Šç­çš„å¦³ ğŸ’ª</h1>
    <p id="quote"></p>
    <div class="heart">â¤ï¸</div>

    <div class="video-wrapper fade-in">
      <iframe id="player" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
    const passwordCorrect = "19981101";

    const pairs = [
        { quote: "å¿™ç¢Œçš„å¦³ï¼Œè¨˜å¾—åˆ¥å¿˜äº†å–˜å£æ°£ï¼Œæˆ‘ä¸€ç›´åœ¨é€™è£¡é»˜é»˜æ”¯æŒã€‚", videoId: "DY2eiv9rHF4" },
        { quote: "å°±ç®—ä¸–ç•Œå†äº‚ï¼Œè‡³å°‘æˆ‘å¸Œæœ›æˆç‚ºå¦³æœ€å®‰å®šçš„é¿é¢¨æ¸¯ã€‚", videoId: "E9yi19u0Y6o" },
        { quote: "å¦³çš„å …å¼·æ˜¯æˆ‘è¦‹éæœ€ç¾çš„é¢¨æ™¯ï¼Œè«‹ç›¸ä¿¡å¦³æ²’é‚£éº¼å­¤å–®ã€‚", videoId: "XIYTWH_iUqU" },
        { quote: "ä»Šå¤©ä¸ç®¡å¤šç´¯ï¼Œè¨˜å¾—é‚„æœ‰ä¸€å€‹äººæƒ³å¦³çš„ç¬‘å®¹ã€‚", videoId: "pwvoH4aGbmE" },
        { quote: "å¤œç­å†æ™šï¼Œä¹Ÿé¡˜é€™ä»½æº«æŸ”é™ªå¦³æ¸¡éé»‘å¤œã€‚", videoId: "CpodRBeFl3c" },
        { quote: "å¦³çœ‹ä¸è¦‹çš„åŠªåŠ›ï¼Œæˆ‘éƒ½çœ‹åœ¨çœ¼è£¡ï¼Œä¹Ÿæ·±æ·±ä½©æœã€‚", videoId: "XIYTWH_iUqU" },
        { quote: "é€™ä¸–ç•Œé›–ç„¶è¤‡é›œï¼Œå¦³çš„çœŸèª å’Œç†±æƒ…å»æœ€å€¼å¾—çæƒœã€‚", videoId: "qzfi7cM4zW0" }
    ];

    let player;
    let playlist = [];
    let currentIndex = -1;

    function shuffle(array) {
        for (let i = array.length -1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i+1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function initPlaylist() {
        playlist = shuffle([...Array(pairs.length).keys()]);
        currentIndex = -1;
    }

    function playNext() {
        currentIndex++;
        if(currentIndex >= playlist.length) {
            initPlaylist();
            currentIndex = 0;
        }
        const idx = playlist[currentIndex];
        document.getElementById("quote").innerText = pairs[idx].quote;
        player.loadVideoById(pairs[idx].videoId);
        player.playVideo();
    }

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            videoId: '',
            playerVars: {
                'autoplay': 0,
                'controls': 1,
                'rel': 0,
                'showinfo': 0,
                'modestbranding': 1,
                'loop': 0
            },
            events: {
                'onStateChange': function(event) {
                    if(event.data === YT.PlayerState.ENDED) {
                        playNext();
                    }
                }
            }
        });
    }

    function checkPassword() {
        const input = document.getElementById("passwordInput").value.trim();
        const errorMsg = document.getElementById("errorMsg");
        if(input === passwordCorrect) {
            document.getElementById("passwordPage").style.display = "none";
            document.getElementById("surprisePage").style.display = "block";
            initPlaylist();
            playNext();
        } else {
            errorMsg.innerText = "å¯†ç¢¼éŒ¯èª¤ï¼Œå†è©¦è©¦çœ‹å§ï½";
        }
    }
</script>

<script>
(function() {
    const canvas = document.getElementById('snow-canvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let snowflakes = [];

    function random(min, max) {
        return Math.random() * (max - min) + min;
    }

    function init() {
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width;
        canvas.height = height;
        snowflakes = [];
        for (let i = 0; i < 120; i++) {
            snowflakes.push({
                x: Math.random() * width,
                y: Math.random() * height,
                radius: random(2, 5),
                speedY: random(0.7, 1.7),
                speedX: random(-0.7, 0.7),
                opacity: random(0.5, 1),
                angle: Math.random() * 2 * Math.PI,
                angleSpeed: random(0.01, 0.03)
            });
        }
    }

    function draw() {
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
        ctx.shadowColor = 'rgba(255, 255, 255, 0.8)';
        ctx.shadowBlur = 3;

        snowflakes.forEach(flake => {
            flake.angle += flake.angleSpeed;
            flake.x += flake.speedX + Math.sin(flake.angle) * 0.3;
            flake.y += flake.speedY;

            if (flake.y > height) {
                flake.y = -flake.radius;
                flake.x = Math.random() * width;
            }
            if (flake.x > width) flake.x = 0;
            else if (flake.x < 0) flake.x = width;

            ctx.beginPath();
            ctx.arc(flake.x, flake.y, flake.radius, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(255, 255, 255, ${flake.opacity})`;
            ctx.fill();
        });

        requestAnimationFrame(draw);
    }

    window.addEventListener('resize', init);

    init();
    draw();
})();
</script>

</body>
</html>
